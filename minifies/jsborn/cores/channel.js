(function(e){JSB.extendCore("JSB.core.channel",JSB.cls("jsborn/cores/channel",{addChannel:function(a){if(this.getChannel(a))return!1;this._obj_channel[a]={member:[]};return!0},delChannel:function(a){if(!this.getChannel(a))return!1;delete this._obj_channel[a];return!0},join:function(a,c,b){this.addChannel(a);this.getChannel(a).member.push(c);jQuery(this)[JSB.event.on](a,{scope:c},function(a){b.apply(c,arguments)});return!0},getChannel:function(a){return this._obj_channel[a]},getChannelData:function(){return this._obj_channel},
send:function(a){if(!this.getChannel(a))return!1;for(var c=[],b=1;b<arguments.length;b++)c.push(arguments[b]);jQuery(this).triggerHandler(a,c);return!0},leave:function(a,c){var b=jQuery._data(this,"events");if(!b[a])return!1;for(var d=0;d<b[a].length;d++)if(b[a][d].data.scope==c)return b[a].splice(d,1),!0;return!1},initialize:function(){var a=this;a._obj_channel={};JSB.addEventListener("destroy",function(c,b){for(x in a._obj_channel)a.leave(x,b)})}}))})(window);
