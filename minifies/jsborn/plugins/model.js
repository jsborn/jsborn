(function(d){JSB.extendPlugin("model",JSB.cls("jsborn/plugins/model",{imports:["jsborn/cores/model"],initialize:function(b){var a=this;a.PLUG_MODEL={model:[]};a.parent=b?b:a;a.parent.addEventListener("destroy",function(){for(var b=0;b<a.PLUG_MODEL.model.length;b++)a.PLUG_MODEL.model[b].destroy()})},getModelData:function(b){return this.PLUG_MODEL.model},getModel:function(b){for(var a=0;a<this.PLUG_MODEL.model.length;a++){var c=this.PLUG_MODEL.model[a];if(c.getOption().key==b)return c}return!1},setModel:function(b,
a){var c=this.getModel(b);return c?c.change(a):!1},addModel:function(b,a){var c=JSB.create("jsborn/plugin/model/node",{key:b,data:jQuery.extend(!0,{},a)});this.PLUG_MODEL.model.push(c);return c},delModel:function(b){for(var a=0;a<this.PLUG_MODEL.model.length;a++){var c=this.PLUG_MODEL.model[a];if(c.getOption().key==b)return this.PLUG_MODEL.model.splice(a,1),c}return!1}}));JSB.cls("jsborn/plugin/model/node",{getData:function(){return jQuery.extend(!0,{},this._obj_data.data)},setData:function(b){this._obj_data.data=
b;return jQuery.extend(!0,{},this._obj_data.data)},setOption:function(b){return this._obj_data=b},getOption:function(){return this._obj_data},change:function(b){var a=JSB.core.model.getObjtDiff(this.getData(),b,"all");jQuery.isEmptyObject(a.add)||this.dispatchEvent("model-add",a.add);jQuery.isEmptyObject(a.del)||this.dispatchEvent("model-del",a.del);jQuery.isEmptyObject(a.modify)||this.dispatchEvent("model-modify",a.modify);return this.setData(b)},initialize:function(b){this.setOption(b)}})})(window);
